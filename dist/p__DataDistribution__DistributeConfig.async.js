(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"Sq+S":function(t,e,a){"use strict";a.r(e);a("1hTB");var n,i,s,r,o,c,l,u=a("KFXw"),d=(a("enMo"),a("1HgO")),p=(a("5hX3"),a("wjJH")),m=(a("jDyY"),a("q6Oz")),h=(a("Q1Fi"),a("7NCv")),f=(a("Hq/V"),a("fAnr")),D=(a("qasP"),a("O3Zn")),g=a("43Yg"),b=a.n(g),y=a("/tCh"),E=a.n(y),S=a("scpF"),N=a.n(S),M=a("O/V9"),w=a.n(M),I=a("Tfcp"),v=a.n(I),A=a("8aBX"),C=a.n(A),T=(a("VIk5"),a("X+Ft")),P=a("i9FB"),k=a.n(P),O=a("LneV"),V=a("vRIe"),x=a.n(V),L=a("qj9E"),z=a("16fl"),B=a.n(z),H=a("1Haz"),F=a("lNND"),R=a("rC0w"),U=(a("ESh5"),a("CtjU")),j=(a("avCb"),a("dbpm")),Y=(a("7vPY"),a("qRUD")),q=a("GJrN"),G=a.n(q),J=a("aR0e"),X=a.n(J),K=(n=Object(O["connect"])(function(t){var e=t.dataSyncNewMission,a=t.loading;return{dataSyncNewMission:e,dataSourceStatus:a.effects["dataSyncNewMission/fetchDataSourcePluginsAction"],dataDestinationStatus:a.effects["dataSyncNewMission/fetchDataDestinationPluginsAction"]}}),i=Y["a"].create(),n(s=i((r=function(t){function e(){var t,a;b()(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return a=N()(this,(t=w()(e)).call.apply(t,[this].concat(i))),a.chooseType=function(t){var e=a.props,n=e.dispatch,i=e.dataSyncNewMission,s=i.configDataModalVisible;n({type:"dataSyncNewMission/changeCurrentDataInfoAction",currentDataInfo:t}),n({type:"dataSyncNewMission/changeConfigDataModalAction",configDataModalVisible:!s}),a.closeDataModal()},a.closeDataModal=function(){var t=a.props.dispatch;t({type:"dataSyncNewMission/changeDataModalVisibleAction",dataModalVisible:!1})},a.renderAllItems=function(t){var e=a.props,n=e.dataSyncNewMission,i=e.dataSourceStatus,s=e.dataDestinationStatus,r=n.modalType;return("dataOrigin"===r?i:s)?k.a.createElement(j["a"],null):k.a.createElement("ul",{className:G.a.dataOrigin+" clearfix",style:{height:"dataOrigin"===r?530:632}},t.map(function(t,e){return k.a.createElement("li",{key:e,onClick:function(){return a.chooseType(t)}},k.a.createElement("img",{src:t.hasOwnProperty("icon")?R["d"][t.icon].url:X.a,alt:""}),k.a.createElement("span",null,t.name))}))},a}return C()(e,t),E()(e,[{key:"render",value:function(){var t=this.props.dataSyncNewMission,e=t.modalType,a=t.dataOriginList,n=t.dataDestinationList,i=t.dataModalVisible;return k.a.createElement(U["a"],{title:"dataOrigin"===e?"\u9009\u62e9\u6570\u636e\u6e90\u7c7b\u578b":"\u9009\u62e9\u6570\u636e\u76ee\u7684\u5730\u7c7b\u578b",visible:i,footer:null,onCancel:this.closeDataModal,centered:!0,className:G.a.dataOriginModal},"dataOrigin"===e?this.renderAllItems(a):this.renderAllItems(n))}}]),e}(P["PureComponent"]),s=r))||s)||s),Q=K,W=a("SkeL"),Z=a("OlTT"),_=a("zHco"),$=T["a"].Group,tt=(o=Object(O["connect"])(function(t){var e=t.dataDistribution,a=t.dataSyncNewMission,n=t.loading;return{dataDistribution:e,dataSyncNewMission:a,fetchDataMissionStatus:n.effects["dataDistribution/getInfoFormSourceAction"]}}),o((l=function(t){function e(){var t;return b()(this,e),t=N()(this,w()(e).call(this)),t.fetchDataList=function(e){var a=t.props,n=a.dispatch,i=a.dataDistribution,s=i.platformType;n({type:"dataDistribution/getInfoFormSourceAction",uuid:"local"===s?e["uuid"]:e["id"]})},t.searchDataDestination=function(){var e=t.props,a=e.dispatch,n=e.dataDistribution,i=n.sourceInfo,s=t.state.inputValue;s?a({type:"dataDistribution/searchDistributeListAction",uuid:i.uuid,name:s}):t.fetchDataList(i)},t.resetDataDestination=function(){var e=v()(t);t.setState({inputValue:"",currentPage:F["c"].defaultPage},function(){e.searchDataDestination()})},t.onInputChange=function(e){t.setState({inputValue:e.target.value})},t.showDetailModal=function(e){var a=t.props,n=(a.dispatch,a.dataDistribution),i=n.platformType;L["a"].storage.setStorage("processorId","local"===i?e.uuid:e.id),B.a.push({pathname:"/dataDistribution/distributeDetail",params:{data:e,isRouterPush:!0}})},t.pageChange=function(e){var a=t.props.dataDistribution,n=a.sourceInfo;t.setState({currentPage:e.current},function(){t.fetchDataList(n)})},t.handleDestination=function(e,a){var n=v()(t),i=t.props,s=i.dispatch,r=i.dataDistribution,o=r.sourceInfo;new Promise(function(t,n){s({type:"dataDistribution/"+("running"===a?"runningDestinationAction":"pause"===a?"pauseDestinationAction":"restart"===a?"restartDestinationAction":"resume"===a?"resumeDestinationAction":"delete"===a?"deleteDestinationAction":""),uuid:e.id,resolve:t,reject:n})}).then(function(t){"true"===t.result?(L["a"].prompt.success(t.data),n.fetchDataList(o)):L["a"].prompt.error(t.message)})},t.editDestination=function(e){var a=t.props.dispatch;a({type:"dataSyncNewMission/changeModalTypeAction",modalType:"dataDestination"}),a({type:"dataSyncNewMission/changeCurrentDataInfoAction",currentDataInfo:{className:e["class_name"],id:e.pluginId,uuid:e.uuid}}),a({type:"dataSyncNewMission/changeProcessorEditAction",isProcessorEdit:!0}),a({type:"dataSyncNewMission/setCurrentStepAction",currentStep:1}),B.a.push({pathname:"/dataDistribution/step-form/config",params:{isRouterPush:!0,uuid:e.id}})},t.showDataModal=function(){var e=t.props.dispatch;e({type:"dataSyncNewMission/changeModalTypeAction",modalType:"dataDestination"}),e({type:"dataSyncNewMission/setFormDataAction",formData:{}}),e({type:"dataSyncNewMission/changeProcessorTypeInfoAction",params:{originActiveColor:"",processorUuid:""}}),B.a.push({pathname:"/dataDistribution/step-form/sourceType",params:{isRouterPush:!0}})},t.state={currentPage:F["c"].defaultPage,pageSize:F["c"].defaultPageSize,inputValue:""},t}return C()(e,t),E()(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.dispatch,a=t.location;L["a"].auth.returnSpecialMainPage(a,"/dataDistribution"),a.hasOwnProperty("params")&&a["params"].hasOwnProperty("data")&&(e({type:"dataDistribution/setSourceInfoAction",sourceInfo:a["params"]["data"]}),this.fetchDataList(a["params"]["data"])),L["a"].storage.setStorage("HtmlType",{modalType:"dataDestination",isProcessorEdit:!1})}},{key:"render",value:function(){var t=this,e=this.props,a=e.fetchDataMissionStatus,n=(e.sourceData,e.dataDistribution),i=n.sourceToSinkInfo,s=n.sourceInfo,r=i.destinations,o=i.source,c=this.state.inputValue,l=[{title:"\u5e8f\u53f7",dataIndex:"key"},{title:"\u5206\u53d1\u76ee\u7684\u5730",dataIndex:"name"},{title:"\u72b6\u6001",dataIndex:"state",render:function(t){return L["a"].lodash.isUndefined(R["e"][t])?R["e"]["UNKNOWN"].label:R["e"][t].label}},{title:"\u5907\u6ce8",dataIndex:"desc"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createDate"},{title:"\u64cd\u4f5c",render:function(e,a){return k.a.createElement(P["Fragment"],null,k.a.createElement($,null,k.a.createElement(T["a"],{disabled:a.state===R["e"]["INACTIVED"].value,title:"\u8be6\u60c5",size:"small",onClick:function(){return t.showDetailModal(a)}},"\u8be6\u60c5"),k.a.createElement(T["a"],{disabled:a.state!==R["e"]["INACTIVED"].value&&a.state!==R["e"]["FAILED"].value,title:"\u542f\u52a8",shape:"circle",icon:"caret-right",size:"small",onClick:function(){return t.handleDestination(a,"running")}}),k.a.createElement(T["a"],{disabled:a.state!==R["e"]["RUNNING"].value,title:"\u6682\u505c",shape:"circle",icon:"pause",size:"small",onClick:function(){return t.handleDestination(a,"pause")}}),k.a.createElement(T["a"],{disabled:a.state!==(R["e"]["RUNNING"].value||a.state===R["e"]["PAUSED"].value),title:"\u91cd\u542f",shape:"circle",icon:"redo",size:"small",onClick:function(){return t.handleDestination(a,"restart")}}),k.a.createElement(T["a"],{disabled:a.state!==R["e"]["PAUSED"].value,title:"\u6062\u590d",shape:"circle",icon:"retweet",size:"small",onClick:function(){return t.handleDestination(a,"resume")}}),k.a.createElement(D["a"],{title:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u4efb\u52a1\u5417?",onConfirm:t.handleDestination.bind(t,a,"delete"),okText:"\u662f",cancelText:"\u5426"},k.a.createElement(T["a"],{title:"\u5220\u9664",shape:"circle",icon:"delete",size:"small"})),k.a.createElement(T["a"],{title:"\u7f16\u8f91",shape:"circle",icon:"edit",size:"small",onClick:function(){return t.editDestination(a)}})))}}];return k.a.createElement(_["a"],{title:s.hasOwnProperty("name")?s.name:"---"},k.a.createElement(m["a"],{style:{marginBottom:20}},k.a.createElement(h["a"],{className:x.a.distributeTitle},k.a.createElement(f["a"],{span:8},k.a.createElement("span",null,"\u63a5\u5165\u4eba\uff1a"),k.a.createElement("span",null,o.hasOwnProperty("createBy")?o.createBy:"---")),k.a.createElement(f["a"],{span:8,className:x.a.distributeBtns},k.a.createElement("span",null,"\u521b\u5efa\u65f6\u95f4\uff1a"),k.a.createElement("span",null,o.hasOwnProperty("createDate")?L["a"].moment(o.createDate).format("YYYY-MM-DD HH:mm:ss"):"---"))),k.a.createElement(h["a"],{className:x.a.distributeTitle},k.a.createElement(f["a"],{span:16},k.a.createElement("span",null,"\u63cf\u8ff0\uff1a"),k.a.createElement("span",null,o.hasOwnProperty("desc")?o.desc:"---")))),k.a.createElement(h["a"],{className:x.a.distributeTitle},k.a.createElement(f["a"],{span:8,className:x.a.distributeBtns},k.a.createElement(T["a"],{type:"primary",onClick:this.showDataModal},k.a.createElement(p["a"],{type:"plus"}),k.a.createElement("span",null,"\u65b0\u589e\u5206\u53d1"))),k.a.createElement(f["a"],{span:11,style:{textAlign:"right"}},k.a.createElement("span",null,"\u6570\u636e\u76ee\u7684\u540d\u79f0"),k.a.createElement(d["a"],{className:x.a.distributeInput,value:c,placeholder:Object(H["formatMessage"])({id:"dataDistribution.dataDestination.index.PlaceHolder"}),onChange:this.onInputChange})),k.a.createElement(f["a"],{span:5,className:x.a.distributeBtns,style:{textAlign:"right"}},k.a.createElement(T["a"],{onClick:this.searchDataDestination},"\u67e5\u8be2"),k.a.createElement(T["a"],{onClick:this.resetDataDestination,type:"primary"},"\u91cd\u7f6e"))),k.a.createElement(u["a"],{className:x.a.distributeTable,dataSource:r,pagination:!1,columns:l,onChange:this.pageChange,loading:a}),k.a.createElement(Q,null),k.a.createElement(W["a"],null),k.a.createElement(Z["a"],null))}}]),e}(P["PureComponent"]),c=l))||c);e["default"]=tt},vRIe:function(t,e,a){t.exports={distributeTitle:"antd-pro-pages-data-distribution-distribute-config-distributeTitle",distributeInput:"antd-pro-pages-data-distribution-distribute-config-distributeInput",distributeBtns:"antd-pro-pages-data-distribution-distribute-config-distributeBtns",distributeTable:"antd-pro-pages-data-distribution-distribute-config-distributeTable",syncTitleName:"antd-pro-pages-data-distribution-distribute-config-syncTitleName",contentLink:"antd-pro-pages-data-distribution-distribute-config-contentLink",extraImg:"antd-pro-pages-data-distribution-distribute-config-extraImg",pageHeaderContent:"antd-pro-pages-data-distribution-distribute-config-pageHeaderContent"}}}]);