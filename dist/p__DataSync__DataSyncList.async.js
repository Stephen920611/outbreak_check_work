(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{ap4q:function(e,a,t){"use strict";t.r(a);t("dp+4");var s,n,c,r=t("nA/W"),i=(t("qasP"),t("O3Zn")),o=(t("5hX3"),t("wjJH")),l=(t("QKdE"),t("2Vcd")),d=(t("jDyY"),t("q6Oz")),p=(t("B40R"),t("43HQ")),u=t("mK77"),m=t.n(u),y=t("43Yg"),h=t.n(y),f=t("/tCh"),g=t.n(f),N=t("scpF"),S=t.n(N),E=t("O/V9"),w=t.n(E),v=t("Tfcp"),C=t.n(v),P=t("8aBX"),T=t.n(P),A=(t("VIk5"),t("X+Ft")),b=(t("Cg6S"),t("Vv/m")),k=(t("enMo"),t("1HgO")),D=t("i9FB"),M=t.n(D),L=t("LneV"),O=t("ftaM"),R=t.n(O),x=t("qj9E"),I=t("16fl"),z=t.n(I),U=t("lNND"),B=t("rC0w"),j=t("zHco"),H=t("aR0e"),K=t.n(H),V=k["a"].Search,F=b["a"].Option,W=A["a"].Group,q=(s=Object(L["connect"])(function(e){var a=e.dataSyncNewMission,t=e.clusterManage,s=e.loading;return{dataSyncNewMission:a,clusterManage:t,fetchDataMissionStatus:s.effects["dataSyncNewMission/fetchSourceProcessorsListAction"],fetchDataListStatus:s.effects["dataSyncNewMission/fetchClusterSourceProcessorsListAction"]}}),s((c=function(e){function a(){var e;return h()(this,a),e=S()(this,w()(a).call(this)),e.fetchDataList=function(){var a=e.props,t=a.dispatch,s=a.dataSyncNewMission,n=s.checkType,c=e.state,r=c.currentPage,i=c.clusterActiveColor,o=C()(e),l={};"cluster"===n&&(l={clusterId:i}),new Promise(function(e,a){t({type:"local"===n?"dataSyncNewMission/fetchSourceProcessorsListAction":"dataSyncNewMission/fetchClusterSourceProcessorsListAction",params:m()({},l,{page:r,pageSize:U["b"].defaultPageSize}),resolve:e,reject:a})}).then(function(e){"true"===e.result?"local"===n&&o.setState({localResourcesAccessed:e.data.total}):x["a"].prompt.error(e.message)})},e.createNewMission=function(){var a=e.props.dispatch;a({type:"dataSyncNewMission/changeSourceEditAction",isSourceEdit:!1}),a({type:"dataSyncNewMission/setCurrentStepAction",currentStep:0}),a({type:"dataSyncNewMission/changeProcessorTypeInfoAction",params:{originActiveColor:"",processorUuid:""}}),a({type:"dataSyncNewMission/setFormDataAction",formData:{}}),a({type:"dataSyncNewMission/createNewMissionAction"})},e.searchResult=function(a){e.props.dispatch},e.handleSelectChange=function(e){console.log("\u7b5b\u9009\u7684\u503c ".concat(e))},e.pageChange=function(a){e.state.clusterActiveColor;e.setState({currentPage:a},function(){e.fetchDataList()})},e.editSource=function(a){var t=e.props.dispatch;t({type:"dataSyncNewMission/changeModalTypeAction",modalType:"dataOrigin"}),t({type:"dataSyncNewMission/changeCurrentDataInfoAction",currentDataInfo:{className:a["class_name"],id:a.pluginId,uuid:a.uuid}}),t({type:"dataSyncNewMission/changeProcessorEditAction",isProcessorEdit:!0}),t({type:"dataSyncNewMission/setCurrentStepAction",currentStep:1}),z.a.push({pathname:"/dataTask/step-form/config",params:{isRouterPush:!0,uuid:a.uuid}})},e.handleDifferentTask=function(a,t){var s=C()(e),n=e.props,c=n.dispatch,r=n.dataSyncNewMission,i=r.checkType;new Promise(function(e,s){c({type:"dataSyncNewMission/"+("activate"===t?"activateSourceProcessorAction":"resume"===t?"resumeSourceProcessorAction":"pause"===t?"pauseSourceProcessorAction":"restart"===t?"restartSourceProcessorAction":"delete"===t?"deleteSourceProcessorAction":""),uuid:"local"===i?a.uuid:a.id,resolve:e,reject:s})}).then(function(e){"true"===e.result?(x["a"].prompt.success(e.data),s.fetchDataList()):x["a"].prompt.error(e.message)})},e.toDetailPage=function(a){var t=e.props,s=(t.dispatch,t.dataSyncNewMission),n=s.checkType;x["a"].storage.setStorage("processorId","local"===n?a.uuid:a.id),z.a.push({pathname:"/dataTask/accessDetail",params:{isRouterPush:!0}})},e.unshiftArr=function(a){var t=e.state,s=t.platformExpand,n=t.localResourcesAccessed;return 0===a.length?a.unshift({isNew:!0,name:"\u672c\u5730\u5e73\u53f0",numberResourcesAccessed:n,remarks:"\u672c\u5730\u5e73\u53f0",id:"000"}):!a[0].hasOwnProperty("isNew")&&a.unshift({isNew:!0,name:"\u672c\u5730\u5e73\u53f0",numberResourcesAccessed:n,remarks:"\u672c\u5730\u5e73\u53f0",id:"000"}),e.changeList(a,s)},e.handleExpand=function(){var a=e.state.platformExpand;e.setState({platformExpand:!a})},e.changeList=function(e,a){return e.length>4&&!a?e.slice(0,4):e},e.onSelectPlatform=function(a){var t=e.props.dispatch;t({type:"dataSyncNewMission/changeDataSourceType",checkType:"000"===a.id?"local":"cluster"}),e.setState({clusterActiveColor:a.id,currentPage:U["b"].defaultPage},function(){e.fetchDataList()})},e.state={currentPage:U["b"].defaultPage,platformExpand:!1,localResourcesAccessed:0,clusterActiveColor:"000"},e}return T()(a,e),g()(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props,t=(a.dataSyncNewMission,a.dispatch);x["a"].storage.setStorage("HtmlType",{modalType:"dataOrigin",isProcessorEdit:!1}),t({type:"dataSyncNewMission/changeDataSourceType",checkType:"local"}),new Promise(function(e,a){t({type:"dataSyncNewMission/fetchClusterManageListServicesAction",params:{},resolve:e,reject:a})}).then(function(a){"true"===a.result?e.fetchDataList():x["a"].prompt.error(a.message)})}},{key:"render",value:function(){var e=this,a=this.props,t=a.fetchDataMissionStatus,s=a.fetchDataListStatus,n=a.dataSyncNewMission,c=(a.clusterManage,n.sourceProcessorsList),u=n.clusterPlatformList,m=n.checkType,y=this.state,h=y.currentPage,f=y.clusterActiveColor;return M.a.createElement(j["a"],{title:"\u6570\u636e\u540c\u6b65"},M.a.createElement("div",{className:R.a.syncTitle},M.a.createElement("div",{className:R.a.syncTitleName},"\u6570\u636e\u6e90",M.a.createElement("span",null,"/",c.hasOwnProperty("total")?c.total:c.hasOwnProperty("count")?c.count:"-","\u6761")),M.a.createElement("div",{className:R.a.syncTitleBtn},M.a.createElement(b["a"],{placeholder:"\u7b5b\u9009",className:R.a.syncTitleSelect,style:{width:120},onChange:this.handleSelectChange},M.a.createElement(F,{value:"jack"},"Jack"),M.a.createElement(F,{value:"lucy"},"Lucy"),M.a.createElement(F,{value:"Yiminghe"},"yiminghe")),M.a.createElement(V,{placeholder:"\u641c\u7d22",className:R.a.syncTitleSearch,onSearch:this.searchResult,style:{width:200},allowClear:!0}))),M.a.createElement("div",{className:R.a.cardPlatform},M.a.createElement(d["a"],null,M.a.createElement(l["a"],{rowKey:"id",grid:{gutter:24,lg:4,md:4,sm:4,xs:4},dataSource:this.unshiftArr(x["a"].lodash.orderBy(u,"create_date","desc")),renderItem:function(a){return M.a.createElement(l["a"].Item,{key:a.uuid,onClick:e.onSelectPlatform.bind(e,a),className:R.a.card},M.a.createElement(d["a"],{hoverable:!0,size:"default",id:a.hasOwnProperty("id")?a.id:"",style:{height:"82px"},className:f===a.id?R.a.activeColor:null},M.a.createElement("div",{className:R.a.platformContent},M.a.createElement("div",{className:R.a.platformLeft},a.name),a.hasOwnProperty("isNew")?M.a.createElement("div",{className:R.a.platformRight,style:{lineHeight:"40px"}},M.a.createElement("p",null,M.a.createElement(p["a"],{color:"#4ecb73"}),"\u5df2\u63a5\u5165\u8d44\u6e90\u6570\uff1a",M.a.createElement("span",{className:R.a.platformRightText},a.numberResourcesAccessed),"\u4e2a")):M.a.createElement("div",{className:R.a.platformRight},M.a.createElement("p",null,M.a.createElement(p["a"],{color:"#4ecb73"}),"\u5df2\u63a5\u5165\u8d44\u6e90\u6570\uff1a",M.a.createElement("span",{className:R.a.platformRightText},a.numberResourcesAccessed),"\u4e2a"),M.a.createElement("p",null,M.a.createElement(p["a"],{color:"#36cbcb"}),"\u53ef\u63a5\u5165\u8d44\u6e90\u6570\uff1a",M.a.createElement("span",{className:R.a.platformRightText},a.numberResourcesAccessible),"\u4e2a")))))}}),M.a.createElement("div",{className:R.a.upOrDown},M.a.createElement("a",{className:R.a.trigger,onClick:this.handleExpand.bind(this)},M.a.createElement(o["a"],{type:this.state.platformExpand?"up":"down"}))))),M.a.createElement("div",{className:R.a.cardList},M.a.createElement(l["a"],{rowKey:"id",loading:"local"===m?t:s,pagination:{current:h,onChange:this.pageChange,pageSize:U["b"].defaultPageSize,total:c.hasOwnProperty("total")?Number(c.total)+1:c.hasOwnProperty("count")?Number(c.count)+1:0},grid:{gutter:24,lg:6,md:6,sm:1,xs:1},dataSource:c.hasOwnProperty("data")?c.data:c.hasOwnProperty("list")?c.list:[],className:R.a.syncList,renderItem:function(a){return a.hasOwnProperty("isNew")&&a.isNew?M.a.createElement(l["a"].Item,{key:a.taskId},M.a.createElement(d["a"],{hoverable:!0,className:R.a.specialCard},M.a.createElement(A["a"],{type:"solid",onClick:e.createNewMission},M.a.createElement(o["a"],{type:"plus"})," \u65b0\u5efa\u6570\u636e\u6e90"))):M.a.createElement(l["a"].Item,{key:a.uuid},M.a.createElement(d["a"],{hoverable:!0,className:R.a.card,title:M.a.createElement("div",{className:R.a.cardTitle},M.a.createElement(o["a"],{type:"exclamation-circle",style:{marginRight:20,fontSize:24,color:a.hasOwnProperty("state")?x["a"].lodash.isUndefined(B["e"][a.state])?B["e"]["UNKNOWN"].color:B["e"][a.state].color:B["e"]["UNKNOWN"].color},title:a.hasOwnProperty("state")?x["a"].lodash.isUndefined(B["e"][a.state])?B["e"]["UNKNOWN"].label:B["e"][a.state].label:B["e"]["UNKNOWN"].label}),M.a.createElement(A["a"],{disabled:a.state!==B["e"]["INACTIVED"].value&&a.state!==B["e"]["FAILED"].value,title:"\u6fc0\u6d3b",shape:"circle",icon:"bulb",size:"small",onClick:function(){return e.handleDifferentTask(a,"activate")}}),M.a.createElement(A["a"],{disabled:a.state!==B["e"]["PAUSED"].value,title:"\u5f00\u59cb",shape:"circle",icon:"caret-right",size:"small",onClick:function(){return e.handleDifferentTask(a,"resume")}}),M.a.createElement(A["a"],{disabled:a.state!==B["e"]["RUNNING"].value,title:"\u6682\u505c",shape:"circle",icon:"pause",size:"small",onClick:function(){return e.handleDifferentTask(a,"pause")}}),M.a.createElement(A["a"],{disabled:a.state!==B["e"]["RUNNING"].value&&a.state!==B["e"]["PAUSED"].value,title:"\u91cd\u542f",shape:"circle",icon:"reload",size:"small",onClick:function(){return e.handleDifferentTask(a,"restart")}})),bordered:!1,extra:M.a.createElement(W,null,M.a.createElement(A["a"],{size:"small",icon:"edit",title:"\u7f16\u8f91",disabled:a.state!==B["e"]["INACTIVED"].value&&a.state!==B["e"]["PAUSED"].value&&""!==a.state,onClick:e.editSource.bind(e,a)}),M.a.createElement(i["a"],{title:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u6570\u636e\u6e90\u5417?",onConfirm:e.handleDifferentTask.bind(e,a,"delete"),okText:"\u662f",cancelText:"\u5426"},M.a.createElement("a",{href:"#"},M.a.createElement(A["a"],{size:"small",icon:"delete",disabled:a.state===B["e"]["RUNNING"].value}))))},M.a.createElement("div",{className:R.a.syncCardContent},M.a.createElement("div",{className:R.a.syncCardSource},"local"===m?M.a.createElement("img",{src:a.hasOwnProperty("icon")?B["d"][a.icon].url:K.a,alt:""}):M.a.createElement(r["a"],{style:{color:"#fff",backgroundColor:"1890ff",marginRight:"10px"}},a.hasOwnProperty("name")?a.name.substring(0,1):"-"),M.a.createElement("div",{onClick:e.toDetailPage.bind(e,a)},a.hasOwnProperty("name")?a.name:"--")),M.a.createElement("div",{className:R.a.syncCardLine}),M.a.createElement("div",{className:R.a.syncBtnContent},"local"===m?M.a.createElement("span",{style:{textAlign:"left",fontSize:10,color:"#999"}},"\u5904\u7406\u901f\u7387:",a.hasOwnProperty("rate")?a.rate:"--","\u6761/\u79d2"):M.a.createElement("span",null)))))}})))}}]),a}(D["PureComponent"]),n=c))||n);a["default"]=q},ftaM:function(e,a,t){e.exports={syncTitle:"antd-pro-pages-data-sync-data-sync-list-syncTitle",syncTitleName:"antd-pro-pages-data-sync-data-sync-list-syncTitleName",syncTitleBtn:"antd-pro-pages-data-sync-data-sync-list-syncTitleBtn",syncTitleSearch:"antd-pro-pages-data-sync-data-sync-list-syncTitleSearch",syncTitleSelect:"antd-pro-pages-data-sync-data-sync-list-syncTitleSelect",cardPlatform:"antd-pro-pages-data-sync-data-sync-list-cardPlatform",card:"antd-pro-pages-data-sync-data-sync-list-card",platformContent:"antd-pro-pages-data-sync-data-sync-list-platformContent",platformLeft:"antd-pro-pages-data-sync-data-sync-list-platformLeft",platformRight:"antd-pro-pages-data-sync-data-sync-list-platformRight",platformRightText:"antd-pro-pages-data-sync-data-sync-list-platformRightText",upOrDown:"antd-pro-pages-data-sync-data-sync-list-upOrDown",trigger:"antd-pro-pages-data-sync-data-sync-list-trigger",activeColor:"antd-pro-pages-data-sync-data-sync-list-activeColor",cardList:"antd-pro-pages-data-sync-data-sync-list-cardList",syncList:"antd-pro-pages-data-sync-data-sync-list-syncList",specialCard:"antd-pro-pages-data-sync-data-sync-list-specialCard",cardTitle:"antd-pro-pages-data-sync-data-sync-list-cardTitle",syncCardContent:"antd-pro-pages-data-sync-data-sync-list-syncCardContent",syncCardSource:"antd-pro-pages-data-sync-data-sync-list-syncCardSource",syncCardLine:"antd-pro-pages-data-sync-data-sync-list-syncCardLine",syncBtnContent:"antd-pro-pages-data-sync-data-sync-list-syncBtnContent",item:"antd-pro-pages-data-sync-data-sync-list-item",extraImg:"antd-pro-pages-data-sync-data-sync-list-extraImg",cardAvatar:"antd-pro-pages-data-sync-data-sync-list-cardAvatar",cardDescription:"antd-pro-pages-data-sync-data-sync-list-cardDescription",pageHeaderContent:"antd-pro-pages-data-sync-data-sync-list-pageHeaderContent",contentLink:"antd-pro-pages-data-sync-data-sync-list-contentLink"}}}]);